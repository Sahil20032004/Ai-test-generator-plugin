<idea-plugin>
    <id>com.github.sahil20032004.aitestgeneratorplugin</id>
    <name>AI Test Generator</name>
    <vendor>sahil20032004</vendor>

    <description><![CDATA[
    AI-powered test generator for Android Studio that creates unit tests and instrumentation tests using OpenAI.

    Features:
    - Generate unit tests for individual classes
    - Generate instrumentation tests for entire projects
    - Smart merge: Updates existing test files without overwriting user code
    - Preview generated tests before insertion
    - Configurable AI settings
    ]]></description>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.java</depends>
    <depends>org.jetbrains.kotlin</depends>
    <!-- Android plugin is optional - plugin works in IntelliJ IDEA for unit tests, and Android Studio for full features -->
    <depends optional="true" config-file="plugin-android.xml">org.jetbrains.android</depends>
    <resource-bundle>messages.MyBundle</resource-bundle>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Settings -->
        <projectConfigurable
            parentId="tools"
            instance="com.github.sahil20032004.aitestgeneratorplugin.ui.SettingsConfigurable"
            id="com.github.sahil20032004.aitestgeneratorplugin.settings"
            displayName="AI Test Generator"/>

        <!-- Application Service -->
        <applicationService
            serviceImplementation="com.github.sahil20032004.aitestgeneratorplugin.settings.PluginSettings"/>

        <toolWindow factoryClass="com.github.sahil20032004.aitestgeneratorplugin.toolWindow.MyToolWindowFactory" id="MyToolWindow"/>
        <postStartupActivity implementation="com.github.sahil20032004.aitestgeneratorplugin.startup.MyProjectActivity" />

    </extensions>
    <extensions defaultExtensionNs="org.jetbrains.kotlin">
        <supportsKotlinPluginMode supportsK1="true" supportsK2="true" />
    </extensions>

    <actions>
        <!-- Group for Tools menu -->
        <group id="com.github.sahil20032004.aitestgeneratorplugin.ToolsMenu"
               text="AI Test Generator"
               description="AI-powered test generation tools"
               popup="true">
            <add-to-group group-id="ToolsMenu" anchor="last"/>

            <action
                id="com.github.sahil20032004.aitestgeneratorplugin.GenerateUnitTest.Tools"
                class="com.github.sahil20032004.aitestgeneratorplugin.actions.GenerateUnitTestAction"
                text="Generate Unit Tests"
                description="Generate unit tests for selected file using AI"
                icon="AllIcons.Actions.Lightning"/>

            <action
                id="com.github.sahil20032004.aitestgeneratorplugin.GenerateInstrumentationTest.Tools"
                class="com.github.sahil20032004.aitestgeneratorplugin.actions.GenerateInstrumentationTestAction"
                text="Generate Instrumentation Tests"
                description="Generate instrumentation tests for the project using AI"
                icon="AllIcons.Actions.Lightning"/>
        </group>

        <!-- Editor context menu action for unit tests -->
        <action
            id="com.github.sahil20032004.aitestgeneratorplugin.GenerateUnitTest"
            class="com.github.sahil20032004.aitestgeneratorplugin.actions.GenerateUnitTestAction"
            text="AI Generate Unit Tests"
            description="Generate unit tests for this class using AI"
            icon="AllIcons.Actions.Lightning">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>

        <!-- Project view action for instrumentation tests -->
        <action
            id="com.github.sahil20032004.aitestgeneratorplugin.GenerateInstrumentationTest"
            class="com.github.sahil20032004.aitestgeneratorplugin.actions.GenerateInstrumentationTestAction"
            text="AI Generate Instrumentation Tests"
            description="Generate instrumentation tests for the project using AI"
            icon="AllIcons.Actions.Lightning">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>
    </actions>
</idea-plugin>
